<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Detail Menu - Tadaima Balige Restaurant</title>
  <link rel="stylesheet" href="../css/styles.css" />
  <link rel="stylesheet" href="../css/menu_detail.css" />
</head>
<body>

  <!-- Navigation -->
  <nav>
    <div class="logo">
      <div class="logo-icon">
        <img src="../images/logo.jpg" alt="Logo" />
      </div>
      <span>Tadaima Balige Restaurant</span>
    </div>
    <ul class="nav-menu">
      <li><a href="../beranda.html">Beranda</a></li>
      <li><a href="menu.html">Menu</a></li>
      <li><a href="reservasi.html">Meja</a></li>
      <li><a href="about.html">Tentang Kami</a></li>
      <li>
        <a href="keranjang.html">
          <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-cart" viewBox="0 0 16 16">
            <path d="M0 1.5a.5.5 0 0 1 .5-.5H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M3.102 4l1.313 7h8.17l1.313-7zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
          </svg>
        </a>
      </li>
      <li>
        <button class="user-profile-btn" onclick="toggleUserDropdown()" style="background: none; border: none; cursor: pointer; padding: 0;">
          <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="white" class="bi bi-person-fill" viewBox="0 0 16 16">
            <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6"/>
          </svg>
        </button>
        <!-- User Dropdown Menu -->
        <div class="user-dropdown" id="userDropdown">
          <a href="user_profile.html" class="dropdown-item">ðŸ‘¤ Profil Saya</a>
          <button class="dropdown-item" onclick="openLogoutModal(event)">ðŸšª Logout</button>
        </div>
      </li>
    </ul>
  </nav>

  <!-- Menu Detail Section -->
  <section class="menu-detail-section">
    <div class="menu-detail-container">
      <!-- Product Image -->
      <div class="menu-detail-image-wrapper">
        <img id="detail-image" src="" alt="Menu" class="menu-detail-image" />
      </div>

      <!-- Product Info -->
      <div class="menu-detail-info">
        <div class="menu-category">
          <span>Kategori</span>
          <span id="detail-category">Memuat...</span>
        </div>

        <h1 id="detail-title" class="menu-detail-title">Memuat...</h1>

        <p id="detail-description" class="menu-detail-description">
          Sedang memuat detail menu...
        </p>

        <div id="detail-price" class="menu-detail-price">Rp 0</div>

        <div class="menu-notes-section">
          <label for="notes">Catatan</label>
          <textarea id="notes" class="menu-notes-input" rows="4" placeholder="Tambah catatan (misal: tidak pedas, ekstra saus, dll)"></textarea>
        </div>

        <button class="add-to-cart-btn" onclick="addToCart()">
          <span class="cart-icon-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-cart" viewBox="0 0 16 16">
              <path d="M0 1.5a.5.5 0 0 1 .5-.5H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M3.102 4l1.313 7h8.17l1.313-7zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
            </svg>
          </span>
          <span>Tambah ke Keranjang</span>
        </button>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="footer-content">
      <div class="footer-section">
        <h3>Restoran</h3>
        <p>Menyajikan cita rasa autentik dengan bahan-bahan terbaik dan segar setiap hari</p>
      </div>
      <div class="footer-section">
        <h3>Jam Buka</h3>
        <ul>
          <li>Senin - Jumat: 09.00 - 22.00</li>
          <li>Sabtu - Minggu: 10.00 - 23.00</li>
        </ul>
      </div>
      <div class="footer-section">
        <h3>Kontak</h3>
        <p>
          Jl. Simonangkir No. 120, Medan<br>
          +62 894-7468-4583<br>
          info@tadaimabalgie.com
        </p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>Â© 2025 Tadaima Balige Restaurant. All rights reserved.</p>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="../js/data_menu.js"></script>
  <script src="../js/logout.js"></script> <!-- jika ada fungsi logout -->
  <script>
    // Ambil parameter dari URL
    const urlParams = new URLSearchParams(window.location.search);
    const itemId = urlParams.get("item");

    if (!itemId || !menuItems[itemId]) {
      // Item tidak ditemukan
      document.getElementById("detail-title").textContent = "Menu Tidak Ditemukan";
      document.getElementById("detail-category").textContent = "-";
      document.getElementById("detail-description").textContent = "Maaf, menu yang Anda cari tidak tersedia atau link salah.";
      document.getElementById("detail-price").style.display = "none";
      document.querySelector(".add-to-cart-btn").style.display = "none";
      document.getElementById("detail-image").src = "https://via.placeholder.com/600x600?text=Menu+Tidak+Ditemukan";
      document.title = "Menu Tidak Ditemukan - Tadaima Balige Restaurant";
    } else {
      const item = menuItems[itemId];

      document.getElementById("detail-title").textContent = item.title;
      document.getElementById("detail-category").textContent = item.category;
      document.getElementById("detail-description").textContent = item.description;
      document.getElementById("detail-price").textContent = `Rp ${item.price.toLocaleString("id-ID")}`;
      document.getElementById("detail-image").src = item.image;
      document.getElementById("detail-image").alt = item.title;

      document.title = `${item.title} - Tadaima Balige Restaurant`;
    }

    function addToCart() {
      const title = document.getElementById("detail-title").textContent;
      const notes = document.getElementById("notes").value.trim();

      let message = `${title} berhasil ditambahkan ke keranjang!`;
      if (notes) {
        message += `\n\nCatatan: ${notes}`;
      }

      alert(message);

      // Optional: simpan ke localStorage (untuk halaman keranjang nanti)
      // let cart = JSON.parse(localStorage.getItem("cart") || "[]");
      // cart.push({ id: itemId, title, price: menuItems[itemId].price, notes });
      // localStorage.setItem("cart", JSON.stringify(cart));
    }
  </script>
</body>
</html>